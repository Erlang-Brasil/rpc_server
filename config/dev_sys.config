[
  {kernel, [
    {sync_nodes_optional, ['rpc_server_http@127.0.0.1','rpc_server_shell@127.0.0.1']},
    {sync_nodes_timeout, 30000},
    {logger_level, info},
    {logger, [
      {handler, default, logger_std_h,
        #{level => info,
          formatter => {logger_formatter, #{single_line => true}}}},
      {handler, error_logger, logger_std_h,
        #{level => info,
          formatter => {logger_formatter, #{single_line => true}}}}
    ]}
  ]},

  {lager, [
    {handlers, [
      {lager_console_backend, [{level, info}]},
      {lager_file_backend, [
        {file, "log/rpc_server.log"},
        {level, info},
        {size, 10485760},
        {date, "$D0"},
        {count, 5}
      ]}
    ]}
  ]},

  {rpc_server_http, [
    {tcp_port, 8080},
    {num_acceptors, 100},
    {max_connections, 10000},
    {tcp_listen_options, [
      binary,
      {packet, raw},
      {reuseaddr, true},
      {active, true},
      {backlog, 128}
    ]},
    {tcp_connection_options, [
      binary,
      {packet, raw},
      {active, false},
      {keepalive, true},
      {send_timeout, 5000},
      {send_timeout_close, true},
      {exit_on_close, true}
    ]}
  ]},

  {rpc_server_shell, []}
].